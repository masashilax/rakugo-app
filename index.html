<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ËêΩË™ûÈëëË≥ûÈå≤</title>
    <!-- Tailwind CSS („Éá„Ç∂„Ç§„É≥Áî®) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM („Ç¢„Éó„É™„ÅÆ‰ªïÁµÑ„ÅøÁî®) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel („Ç≥„Éº„ÉâÁøªË®≥Áî®) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; -webkit-tap-highlight-color: transparent; }
        /* iOSÁî®„ÅÆ„Çπ„Çø„Ç§„É´Ë™øÊï¥ */
        input, textarea { font-size: 16px !important; } /* „Ç∫„Éº„É†Èò≤Ê≠¢ */
    </style>
</head>
<body class="bg-[#f7f3e8] text-[#2c2c2c]">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- „Ç¢„Ç§„Ç≥„É≥„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà (Lucide„ÅÆ‰ª£„Çè„Çä) ---
        const Icon = ({ path, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} dangerouslySetInnerHTML={{ __html: path }} />
        );
        const Icons = {
            Trash2: (p) => <Icon {...p} path='<path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/>' />,
            Plus: (p) => <Icon {...p} path='<path d="M5 12h14"/><path d="M12 5v14"/>' />,
            MapPin: (p) => <Icon {...p} path='<path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/>' />,
            User: (p) => <Icon {...p} path='<path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>' />,
            BookOpen: (p) => <Icon {...p} path='<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>' />,
            Calendar: (p) => <Icon {...p} path='<rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/>' />,
            X: (p) => <Icon {...p} path='<path d="M18 6 6 18"/><path d="m6 6 12 12"/>' />,
            Edit2: (p) => <Icon {...p} path='<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>' />,
            Save: (p) => <Icon {...p} path='<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/>' />,
            MinusCircle: (p) => <Icon {...p} path='<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>' />,
            TrendingUp: (p) => <Icon {...p} path='<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>' />,
            ChevronLeft: (p) => <Icon {...p} path='<path d="m15 18-6-6 6-6"/>' />,
            ChevronRight: (p) => <Icon {...p} path='<path d="m9 18 6-6-6-6"/>' />,
            HelpCircle: (p) => <Icon {...p} path='<circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/>' />,
            Share: (p) => <Icon {...p} path='<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/>' />,
        };

        // --- „É°„Ç§„É≥„Ç¢„Éó„É™ ---
        function RakugoApp() {
            // LocalStorage„Åã„Çâ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„ÇÄÂàùÊúüÂåñÈñ¢Êï∞
            const loadLogs = () => {
                const saved = localStorage.getItem('rakugo_logs');
                return saved ? JSON.parse(saved) : [];
            };

            const [logs, setLogs] = useState(loadLogs);
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [isCalendarOpen, setIsCalendarOpen] = useState(false);
            const [isHelpOpen, setIsHelpOpen] = useState(false);
            const [calendarViewDate, setCalendarViewDate] = useState(new Date());
            const [editingLog, setEditingLog] = useState(null);

            // „Éï„Ç©„Éº„É†„ÅÆÁä∂ÊÖã
            const [date, setDate] = useState(new Date().toISOString().split('T')[0]);
            const [venue, setVenue] = useState('');
            const [lineup, setLineup] = useState([{ performer: '', story: '' }]);
            const [notes, setNotes] = useState('');

            // „É≠„Ç∞„ÅåÊõ¥Êñ∞„Åï„Çå„Åü„ÇâLocalStorage„Å´‰øùÂ≠ò
            useEffect(() => {
                localStorage.setItem('rakugo_logs', JSON.stringify(logs));
            }, [logs]);

            // ÂÖ•ÂäõË£ú‰ΩêÁî®„ÅÆ„Éá„Éº„ÇøÁîüÊàê
            const uniquePerformers = useMemo(() => {
                const names = new Set();
                logs.forEach(log => {
                    if (log.lineup) {
                        log.lineup.forEach(item => { if (item.performer) names.add(item.performer); });
                    } else if (log.performer) {
                        names.add(log.performer);
                    }
                });
                return Array.from(names).sort();
            }, [logs]);

            const uniqueVenues = useMemo(() => {
                const venues = new Set();
                logs.forEach(log => { if (log.venue) venues.add(log.venue); });
                return Array.from(venues).sort();
            }, [logs]);

            // Áµ±Ë®à„Éá„Éº„Çø„ÅÆÁîüÊàê
            const stats = useMemo(() => {
                const now = new Date();
                const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                const currentYear = today.getFullYear();
                const currentMonth = today.getMonth();

                const dayOfWeek = today.getDay();
                const daysToMonday = dayOfWeek === 0 ? 6 : dayOfWeek - 1;
                const startOfWeek = new Date(today);
                startOfWeek.setDate(today.getDate() - daysToMonday);
                const endOfWeek = new Date(startOfWeek);
                endOfWeek.setDate(startOfWeek.getDate() + 7);

                let weekCount = 0;
                let monthCount = 0;

                const parseDate = (dateStr) => {
                    if (!dateStr) return new Date(0);
                    const [y, m, d] = dateStr.split('-').map(Number);
                    return new Date(y, m - 1, d);
                };

                logs.forEach(log => {
                    const logDate = parseDate(log.date);
                    if (logDate.getFullYear() === currentYear && logDate.getMonth() === currentMonth) monthCount++;
                    if (logDate >= startOfWeek && logDate < endOfWeek) weekCount++;
                });

                return { weekCount, monthCount };
            }, [logs]);

            // „Éè„É≥„Éâ„É©„ÉºÈñ¢Êï∞
            const resetForm = () => {
                setDate(new Date().toISOString().split('T')[0]);
                setVenue('');
                setLineup([{ performer: '', story: '' }]);
                setNotes('');
                setEditingLog(null);
            };

            const openModal = (log) => {
                if (log) {
                    setEditingLog(log);
                    setDate(log.date);
                    setVenue(log.venue);
                    setNotes(log.notes);
                    if (log.lineup && log.lineup.length > 0) {
                        setLineup(log.lineup);
                    } else {
                        setLineup([{ performer: log.performer || '', story: log.story || '' }]);
                    }
                } else {
                    resetForm();
                }
                setIsModalOpen(true);
            };

            const closeModal = () => {
                setIsModalOpen(false);
                resetForm();
            };

            const updateLineupItem = (index, field, value) => {
                const newLineup = [...lineup];
                newLineup[index][field] = value;
                setLineup(newLineup);
            };

            const addLineupItem = () => {
                setLineup([...lineup, { performer: '', story: '' }]);
            };

            const removeLineupItem = (index) => {
                if (lineup.length === 1) return;
                const newLineup = lineup.filter((_, i) => i !== index);
                setLineup(newLineup);
            };

            const handleSave = (e) => {
                e.preventDefault();
                const cleanLineup = lineup.filter(item => item.performer.trim() || item.story.trim());
                const finalLineup = cleanLineup.length > 0 ? cleanLineup : [{ performer: '', story: '' }];
                const mainItem = finalLineup[finalLineup.length - 1];

                const logData = {
                    id: editingLog ? editingLog.id : Date.now().toString(),
                    date,
                    venue,
                    lineup: finalLineup,
                    performer: mainItem.performer,
                    story: mainItem.story,
                    notes,
                    createdAt: editingLog ? editingLog.createdAt : new Date().toISOString(),
                };

                if (editingLog) {
                    setLogs(logs.map(log => log.id === editingLog.id ? logData : log).sort((a, b) => new Date(b.date) - new Date(a.date)));
                } else {
                    setLogs([logData, ...logs].sort((a, b) => new Date(b.date) - new Date(a.date)));
                }
                closeModal();
            };

            const handleDelete = (id, e) => {
                e.stopPropagation();
                if (!confirm('„Åì„ÅÆË®òÈå≤„ÇíÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü')) return;
                setLogs(logs.filter(log => log.id !== id));
            };

            // „Ç´„É¨„É≥„ÉÄ„ÉºÈñ¢ÈÄ£
            const changeCalendarMonth = (offset) => {
                const newDate = new Date(calendarViewDate);
                newDate.setMonth(newDate.getMonth() + offset);
                setCalendarViewDate(newDate);
            };

            const renderCalendarDays = () => {
                const year = calendarViewDate.getFullYear();
                const month = calendarViewDate.getMonth();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const firstDay = new Date(year, month, 1).getDay();

                const days = [];
                for (let i = 0; i < firstDay; i++) {
                    days.push(<div key={`pad-${i}`} className="h-10 w-10"></div>);
                }
                
                for (let d = 1; d <= daysInMonth; d++) {
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                    const hasLog = logs.some(log => log.date === dateStr);
                    const isToday = new Date().toDateString() === new Date(year, month, d).toDateString();
                    
                    days.push(
                        <div key={d} className={`h-10 w-10 flex flex-col items-center justify-center rounded-full relative ${isToday ? 'bg-[#2d4059] text-white' : 'text-gray-700 hover:bg-gray-100'}`}>
                            <span className={`text-sm ${isToday ? 'font-bold' : ''}`}>{d}</span>
                            {hasLog && (
                                <div className={`absolute bottom-1 w-1.5 h-1.5 rounded-full ${isToday ? 'bg-red-400' : 'bg-[#c84b31]'}`}></div>
                            )}
                        </div>
                    );
                }
                return days;
            };

            return (
                <div className="min-h-screen pb-24">
                    {/* Header */}
                    <header className="bg-[#2d4059] text-white p-4 sticky top-0 z-10 shadow-md">
                        <div className="max-w-md mx-auto">
                            <div className="flex items-center justify-between mb-3">
                                <h1 className="text-xl font-bold tracking-widest font-serif flex items-center gap-2">
                                    <span className="bg-red-600 text-white px-2 py-0.5 text-sm rounded-sm">ÂØÑÂ∏≠</span>
                                    ËêΩË™ûÈëëË≥ûÈå≤
                                </h1>
                                <div className="flex items-center gap-3">
                                    <div className="text-sm font-bold text-[#eecda3] flex items-center gap-1">
                                        <Icons.BookOpen size={14} />
                                        ÂÖ®{logs.length}Â∏≠
                                    </div>
                                    <button onClick={() => setIsHelpOpen(true)} className="text-white/70 hover:text-white">
                                        <Icons.HelpCircle size={20} />
                                    </button>
                                </div>
                            </div>
                            
                            <div className="flex gap-3 text-xs">
                                <button onClick={() => setIsCalendarOpen(true)} className="bg-[#1e2b3c] px-3 py-2 rounded flex items-center justify-between flex-1 border border-white/10 shadow-inner hover:bg-[#2c3e56] transition-colors cursor-pointer">
                                    <span className="text-gray-400 flex items-center gap-1"><Icons.Calendar size={12} /> ‰ªäÈÄ±</span>
                                    <span className="text-white font-bold text-lg">{stats.weekCount}<span className="text-xs font-normal text-gray-400 ml-0.5">Â∏≠</span></span>
                                </button>
                                <button onClick={() => setIsCalendarOpen(true)} className="bg-[#1e2b3c] px-3 py-2 rounded flex items-center justify-between flex-1 border border-white/10 shadow-inner hover:bg-[#2c3e56] transition-colors cursor-pointer">
                                    <span className="text-gray-400 flex items-center gap-1"><Icons.TrendingUp size={12} /> ‰ªäÊúà</span>
                                    <span className="text-white font-bold text-lg">{stats.monthCount}<span className="text-xs font-normal text-gray-400 ml-0.5">Â∏≠</span></span>
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="max-w-md mx-auto p-4 space-y-4">
                        {logs.length === 0 ? (
                            <div className="text-center py-20 opacity-60">
                                <div className="text-6xl mb-4">üé≠</div>
                                <p className="text-lg font-bold mb-2">Ë®òÈå≤„Åå„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                                <p className="text-sm">Âè≥‰∏ã„ÅÆ„Éú„Çø„É≥„Åã„Çâ<br/>ÊúÄÂàù„ÅÆÂØÑÂ∏≠„ÇíË®òÈå≤„Åó„Åæ„Åó„Çá„ÅÜ</p>
                            </div>
                        ) : (
                            logs.map((log) => {
                                const displayItems = log.lineup && log.lineup.length > 0 ? log.lineup : [{ performer: log.performer || '', story: log.story || '' }];
                                return (
                                    <div key={log.id} onClick={() => openModal(log)} className="bg-white rounded-lg shadow-sm border-l-4 border-[#c84b31] p-4 relative cursor-pointer hover:shadow-md transition-shadow group">
                                        <div className="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                            <button onClick={(e) => handleDelete(log.id, e)} className="p-2 text-gray-400 hover:text-red-500 bg-gray-50 rounded-full"><Icons.Trash2 size={16} /></button>
                                        </div>
                                        <div className="flex items-center text-xs text-gray-500 mb-3 font-mono">
                                            <Icons.Calendar size={12} className="mr-1" />{log.date.replace(/-/g, '.')}
                                            <span className="mx-2">|</span>
                                            <Icons.MapPin size={12} className="mr-1" />{log.venue || 'Â†¥ÊâÄÊú™ÂÆö'}
                                        </div>
                                        <div className="space-y-3 mb-3">
                                            {displayItems.map((item, idx) => (
                                                <div key={idx} className="flex flex-col">
                                                    <h3 className="text-lg font-bold text-[#2d4059] leading-tight">{item.story || 'ÊºîÁõÆ„Å™„Åó'}</h3>
                                                    <div className="flex items-center text-[#c84b31] font-medium text-sm mt-0.5">
                                                        <Icons.User size={14} className="mr-1" />{item.performer || 'ÊºîËÄÖ„Å™„Åó'}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                        {log.notes && <div className="bg-[#fcfaf5] p-2 rounded text-sm text-gray-600 leading-relaxed border border-[#eecda3]/30 mt-2">{log.notes}</div>}
                                    </div>
                                );
                            })
                        )}
                    </main>

                    {/* FAB */}
                    <button onClick={() => openModal()} className="fixed bottom-6 right-6 bg-[#c84b31] hover:bg-[#a63d28] text-white rounded-full p-4 shadow-lg transition-transform hover:scale-105 active:scale-95 z-20">
                        <Icons.Plus size={28} />
                    </button>

                    {/* Help Modal */}
                    {isHelpOpen && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in duration-200">
                            <div className="bg-white w-full max-w-sm rounded-xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200">
                                <div className="bg-[#2d4059] text-white p-4 flex justify-between items-center">
                                    <h2 className="font-bold flex items-center gap-2"><Icons.Share size={18}/> „Ç¢„Éó„É™„Å®„Åó„Å¶‰øùÂ≠ò„Åô„Çã</h2>
                                    <button onClick={() => setIsHelpOpen(false)} className="hover:bg-white/10 p-1 rounded-full"><Icons.X size={20} /></button>
                                </div>
                                <div className="p-5 space-y-6 text-sm text-gray-700">
                                    <p className="font-bold">„Åì„ÅÆ„Éö„Éº„Ç∏„Çí„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†„Åô„Çã„Å®„ÄÅ„Ç¢„Éó„É™„ÅÆ„Çà„ÅÜ„Å´‰Ωø„Åà„Åæ„Åô„ÄÇ</p>
                                    <div className="bg-gray-50 p-4 rounded-lg border border-gray-100">
                                        <h3 className="font-bold text-[#2d4059] mb-2 flex items-center">üçé iPhone (Safari) „ÅÆÂ†¥Âêà</h3>
                                        <ol className="list-decimal list-inside space-y-1 ml-1">
                                            <li>ÁîªÈù¢‰∏ã‰∏≠Â§Æ„ÅÆ<span className="font-bold">„ÄåÂÖ±Êúâ„Éú„Çø„É≥„Äç</span>ÔºàÂõõËßí„Åã„Çâ‰∏äÁü¢Âç∞Ôºâ„Çí„Çø„ÉÉ„Éó</li>
                                            <li><span className="font-bold">„Äå„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†„Äç</span>„ÇíÈÅ∏Êäû</li>
                                            <li>„ÄåËøΩÂä†„Äç„Çí„Çø„ÉÉ„Éó</li>
                                        </ol>
                                    </div>
                                    <div className="bg-gray-50 p-4 rounded-lg border border-gray-100">
                                        <h3 className="font-bold text-[#2d4059] mb-2 flex items-center">ü§ñ Android (Chrome) „ÅÆÂ†¥Âêà</h3>
                                        <ol className="list-decimal list-inside space-y-1 ml-1">
                                            <li>ÁîªÈù¢Âè≥‰∏ä„ÅÆ<span className="font-bold">„Äå„É°„Éã„É•„Éº„Äç</span>ÔºàÁÇπ3„Å§Ôºâ„Çí„Çø„ÉÉ„Éó</li>
                                            <li><span className="font-bold">„Äå„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†„Äç</span>„ÇíÈÅ∏Êäû</li>
                                            <li>„ÄåËøΩÂä†„Äç„Çí„Çø„ÉÉ„Éó</li>
                                        </ol>
                                    </div>
                                    <button onClick={() => setIsHelpOpen(false)} className="w-full bg-[#c84b31] text-white font-bold py-3 rounded-lg">Èñâ„Åò„Çã</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Calendar Modal */}
                    {isCalendarOpen && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in duration-200">
                            <div className="bg-white w-full max-w-sm rounded-xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200">
                                <div className="bg-[#2d4059] text-white p-4 flex justify-between items-center">
                                    <h2 className="font-bold flex items-center gap-2"><Icons.Calendar size={18}/> ÈëëË≥û„Ç´„É¨„É≥„ÉÄ„Éº</h2>
                                    <button onClick={() => setIsCalendarOpen(false)} className="hover:bg-white/10 p-1 rounded-full"><Icons.X size={20} /></button>
                                </div>
                                <div className="p-4">
                                    <div className="flex items-center justify-between mb-4">
                                        <button onClick={() => changeCalendarMonth(-1)} className="p-2 hover:bg-gray-100 rounded-full"><Icons.ChevronLeft size={20} /></button>
                                        <div className="font-bold text-lg">{calendarViewDate.getFullYear()}Âπ¥ {calendarViewDate.getMonth() + 1}Êúà</div>
                                        <button onClick={() => changeCalendarMonth(1)} className="p-2 hover:bg-gray-100 rounded-full"><Icons.ChevronRight size={20} /></button>
                                    </div>
                                    <div className="grid grid-cols-7 gap-1 text-center text-xs font-bold text-gray-400 mb-2">
                                        <div>Êó•</div><div>Êúà</div><div>ÁÅ´</div><div>Ê∞¥</div><div>Êú®</div><div>Èáë</div><div>Âúü</div>
                                    </div>
                                    <div className="grid grid-cols-7 gap-1 justify-items-center">
                                        {renderCalendarDays()}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Input Modal */}
                    {isModalOpen && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in duration-200">
                            <div className="bg-[#fcfaf5] w-full max-w-md rounded-xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]">
                                <div className="bg-[#2d4059] text-white p-4 flex justify-between items-center shrink-0">
                                    <h2 className="font-bold flex items-center gap-2">
                                        {editingLog ? <Icons.Edit2 size={18}/> : <Icons.BookOpen size={18}/>}
                                        {editingLog ? 'Ë®òÈå≤„ÇíÁ∑®ÈõÜ' : 'Êñ∞„Åó„ÅÑË®òÈå≤'}
                                    </h2>
                                    <button onClick={closeModal} className="hover:bg-white/10 p-1 rounded-full"><Icons.X size={20} /></button>
                                </div>

                                <form onSubmit={handleSave} className="p-5 overflow-y-auto flex-1 space-y-5">
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="space-y-1">
                                            <label className="text-xs font-bold text-gray-500 uppercase tracking-wider">Êó•‰ªò</label>
                                            <input type="date" required value={date} onChange={(e) => setDate(e.target.value)} className="w-full bg-white border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#c84b31] outline-none" />
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-xs font-bold text-gray-500 uppercase tracking-wider">Â†¥ÊâÄ„ÉªÂØÑÂ∏≠Âêç</label>
                                            <input type="text" placeholder="Êñ∞ÂÆøÊú´Âª£‰∫≠„Å™„Å©" value={venue} list="venue-list" onChange={(e) => setVenue(e.target.value)} className="w-full bg-white border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#c84b31] outline-none" />
                                            <datalist id="venue-list">{uniqueVenues.map((v) => <option key={v} value={v} />)}</datalist>
                                        </div>
                                    </div>

                                    <div className="space-y-3">
                                        <div className="flex items-center justify-between">
                                            <label className="text-xs font-bold text-gray-500 uppercase tracking-wider">ÊºîÁõÆ„ÉªÊºîËÄÖ„É™„Çπ„Éà</label>
                                            <span className="text-xs text-gray-400">‰∏ä„Åã„ÇâÈ†Ü„Å´Ë°®Á§∫</span>
                                        </div>
                                        <datalist id="performer-list">{uniquePerformers.map((name) => <option key={name} value={name} />)}</datalist>
                                        {lineup.map((item, index) => (
                                            <div key={index} className="flex gap-2 items-start bg-white p-3 rounded-lg border border-gray-200 shadow-sm">
                                                <div className="flex-1 space-y-2">
                                                    <div className="relative">
                                                        <Icons.BookOpen size={14} className="absolute left-2.5 top-2.5 text-gray-400" />
                                                        <input type="text" required placeholder="ÊºîÁõÆÔºàËäùÊµú„Å™„Å©Ôºâ" value={item.story} onChange={(e) => updateLineupItem(index, 'story', e.target.value)} className="w-full bg-gray-50 border-0 border-b border-gray-200 rounded-t p-2 pl-8 focus:ring-0 focus:border-[#c84b31] outline-none font-bold text-gray-800 placeholder-gray-300 text-base" />
                                                    </div>
                                                    <div className="relative">
                                                        <Icons.User size={14} className="absolute left-2.5 top-2.5 text-gray-400" />
                                                        <input type="text" placeholder="ÊºîËÄÖÂêçÔºàË£ú‰Ωê„ÅÇ„ÇäÔºâ" value={item.performer} list="performer-list" onChange={(e) => updateLineupItem(index, 'performer', e.target.value)} className="w-full bg-gray-50 border-0 border-t border-transparent p-2 pl-8 focus:ring-0 outline-none text-sm text-gray-600 placeholder-gray-300" />
                                                    </div>
                                                </div>
                                                {lineup.length > 1 && (
                                                    <button type="button" onClick={() => removeLineupItem(index)} className="mt-2 text-gray-300 hover:text-red-500 p-1"><Icons.MinusCircle size={20} /></button>
                                                )}
                                            </div>
                                        ))}
                                        <button type="button" onClick={addLineupItem} className="w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-[#c84b31] hover:text-[#c84b31] text-sm font-bold transition-colors flex items-center justify-center gap-2"><Icons.Plus size={16} />ÊºîËÄÖ„ÇíËøΩÂä†</button>
                                    </div>

                                    <div className="space-y-1">
                                        <label className="text-xs font-bold text-gray-500 uppercase tracking-wider">ÊÑüÊÉ≥„Éª„É°„É¢</label>
                                        <textarea rows={3} placeholder="ÂÖ®‰Ωì„ÅÆÊÑüÊÉ≥„ÇÑ„ÄÅÁâπÁ≠Ü„Åô„Åπ„Åç„Åì„Å®..." value={notes} onChange={(e) => setNotes(e.target.value)} className="w-full bg-white border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#c84b31] outline-none resize-none" />
                                    </div>
                                </form>

                                <div className="p-4 border-t border-gray-100 bg-gray-50 shrink-0">
                                    <button onClick={handleSave} className="w-full bg-[#2d4059] hover:bg-[#1e2b3c] text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors shadow-md"><Icons.Save size={18} />{editingLog ? 'Êõ¥Êñ∞„Åô„Çã' : 'Ë®òÈå≤„Åô„Çã'}</button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RakugoApp />);
    </script>
</body>
</html>
